{% extends "parent.html" %}

{% block body %} 

<div class="container py-5">
  <div class="row">
    <div class="col-md-6">
        <div class="text-center">
          <form id="uploadForm" class="p-3 border rounded bg-white shadow">
            <h2 class="mb-4">Upload an Image</h2>
            <div class="mb-3">
              <label for="img" class="form-label">Upload Image:</label>
              <input type="file" id="img" class="form-control" accept="image/*" required>
            </div>
            <div id="status" class="mt-3"></div>
            <button type="submit" class="btn btn-primary">Upload</button>
          </form>
        </div>
        <div id="rectangle-table-container" class="mt-3" style="max-height: 300px; overflow-y: auto;">
          <h3 style="color: white;">Drawn Rectangles</h3>
          <table id="rectangle-table" class="table table-striped" style="width: 100%; font-size: 14px; text-align: center; border-collapse: collapse;">
            <thead>
              <tr style="background-color: #f8f9fa;">
                <th style="padding: 8px; border: 1px solid #dee2e6;">#</th>
                <th style="padding: 8px; border: 1px solid #dee2e6;">Label</th>
                <th style="padding: 8px; border: 1px solid #dee2e6;">Top-Left (X, Y)</th>
                <th style="padding: 8px; border: 1px solid #dee2e6;">Width</th>
                <th style="padding: 8px; border: 1px solid #dee2e6;">Height</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        
        <div class="d-flex justify-content-center align-items-center mt-3" style="height: 512px;">
          <img id="file-preview" class="img-fluid rounded" style="display: none; max-width: 100%; max-height: 512px;" alt="Image Preview">
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="canvas-container mb-4">
          <canvas id="canvas" height="512" width="512"></canvas>
        </div>
      
        <!-- Controls Section -->
        <div class="p-3 border rounded bg-white">
          <!-- Zoom Buttons -->
          <div class="mb-3 d-flex justify-content-center gap-2">
            <button id="zoom-in" class="btn btn-secondary"><i class="bi bi-zoom-in mx-1"></i>Zoom In</button>
            <button id="zoom-out" class="btn btn-secondary"><i class="bi bi-zoom-out mx-1"></i>Zoom Out</button>
            <button id="toggle-pan-zoom" class="btn btn-secondary">Switch to Pan/Zoom Mode</button>
            <button id="undo" class="btn btn-secondary"><i class="bi bi-arrow-counterclockwise"></i>Undo</button>
          </div>     
          <!-- Drawing Mode and Clear Canvas -->
          <div class="d-flex justify-content-center gap-2 mt-3">
            <button id="toggle-rectangle-mode" class="btn btn-primary">Enter Rectangle Mode</button>
            <button id="clear-canvas" class="btn btn-danger">Clear Canvas</button>
            <button id="center-canvas" class="btn btn-primary">Center Canvas</button>
            <button id="save-canvas" class="btn btn-primary">Done</button>
          </div>
          <!-- Classification Buttons for bounding boxes -->
          <div class="d-flex justify-content-center gap-2 mt-3">
              <button type="button" class="btn btn-outline-light text-dark" id="btn-label-white">Background</button>
              <button type="button" class="btn btn-outline-dark" id="btn-label-black">Walls</button>
              <button type="button" class="btn btn-outline-danger" id="btn-label-red">Iwan</button>
              <button type="button" class="btn btn-outline-warning" id="btn-label-green">Stairs</button>
              <button type="button" class="btn btn-outline-info" id="btn-label-blue">Room</button>
          </div>
        </div>
      </div>
  </div>
</div>

{% endblock %}
